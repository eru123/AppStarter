<Window x:Class="AppStarter.CommandDetailsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converters="clr-namespace:AppStarter.Converters"
        mc:Ignorable="d"
        Title="Command Details" Height="450" Width="600"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}"
        Style="{StaticResource CustomWindowStyle}">
    
    <Window.Resources>
        <converters:StatusToColorConverter x:Key="StatusToColorConverter"/>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <Style TargetType="Label">
            <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="0,0,0,2"/>
        </Style>
        <Style TargetType="TextBlock" x:Key="ValueText">
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
    </Window.Resources>

    <Border Background="{StaticResource SurfaceBrush}" Padding="20">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Grid Grid.Row="0" Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock Text="{Binding Name}"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               FontSize="24" FontWeight="Bold"/>
                    <TextBlock Text="{Binding Description}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="14" Margin="0,4,0,0"
                               Visibility="{Binding Description, Converter={StaticResource BoolToVisibilityConverter}}"
                               TextWrapping="Wrap"/>
                </StackPanel>
                
                <Border Grid.Column="1" 
                        Background="{StaticResource BackgroundBrush}"
                        CornerRadius="4" Padding="8,4" VerticalAlignment="Top">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse Width="8" Height="8" Margin="0,0,6,0"
                                 Fill="{Binding Status, Converter={StaticResource StatusToColorConverter}}"/>
                        <TextBlock Text="{Binding Status}" 
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   FontWeight="SemiBold"/>
                    </StackPanel>
                </Border>
            </Grid>
            
            <!-- Command Section -->
            <StackPanel Grid.Row="1" Margin="0,0,0,20">
                <Label Content="COMMAND"/>
                <Border Background="{StaticResource BackgroundBrush}" 
                        CornerRadius="6" Padding="12" Margin="0,4,0,0">
                    <TextBlock Text="{Binding Command}" 
                               FontFamily="Consolas" FontSize="13"
                               Foreground="{StaticResource AccentBrush}"
                               TextWrapping="Wrap"/>
                </Border>
                
                <Label Content="ARGUMENTS" Margin="0,12,0,0"/>
                <Border Background="{StaticResource BackgroundBrush}" 
                        CornerRadius="6" Padding="12" Margin="0,4,0,0"
                        Visibility="{Binding Arguments, Converter={StaticResource BoolToVisibilityConverter}}">
                    <TextBlock Text="{Binding Arguments}" 
                               FontFamily="Consolas" FontSize="13"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               TextWrapping="Wrap"/>
                </Border>
            </StackPanel>
            
            <!-- Details Grid -->
            <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Left Column -->
                    <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,10,16">
                        <Label Content="WORKING DIRECTORY"/>
                        <TextBlock Text="{Binding WorkingDirectory}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,16">
                        <Label Content="RESTART POLICY"/>
                        <TextBlock Text="{Binding RestartPolicy}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,0,10,16">
                        <Label Content="START TRIGGER"/>
                        <TextBlock Text="{Binding StartTrigger}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                    
                    <!-- Right Column -->
                    <StackPanel Grid.Row="0" Grid.Column="1" Margin="10,0,0,16">
                        <Label Content="PROCESS ID"/>
                        <TextBlock Text="{Binding ProcessId}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Row="1" Grid.Column="1" Margin="10,0,0,16">
                        <Label Content="LAST STARTED"/>
                        <TextBlock Text="{Binding LastStartTime, StringFormat='{}{0:g}'}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Row="2" Grid.Column="1" Margin="10,0,0,16">
                        <Label Content="CRON MASK"/>
                        <TextBlock Text="{Binding CronExpression}" Style="{StaticResource ValueText}"
                                   Visibility="{Binding CronExpression, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    </StackPanel>
                </Grid>
            </ScrollViewer>
            
            <!-- Close Button -->
            <Button Grid.Row="3" Content="Close" 
                    IsCancel="True"
                    Style="{StaticResource SecondaryButton}"
                    HorizontalAlignment="Right"
                    Padding="20,8" Margin="0,16,0,0"/>
        </Grid>
    </Border>
</Window>
